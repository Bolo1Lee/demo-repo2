{% extends "base.html" %}

{% block title %}Editar Pregunta{% endblock %}

{% block page_title %}✏️ Editar Pregunta{% endblock %}

{% block boton_derecha %}
<a href="{% url 'home' %}" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded flex items-center gap-2 w-fit mt-2">
  🏠 Volver al Inicio
</a>
{% endblock %}

{% block content %}

<h2 class="text-2xl font-bold text-center text-gray-900 dark:text-white mb-6">🛠️ Modificar contenido de la pregunta</h2>

{% if errores %}
  <div class="bg-red-100 dark:bg-red-800 text-red-800 dark:text-red-100 p-4 rounded max-w-3xl mx-auto mb-6">
    <ul class="list-disc list-inside">
      {% for error in errores %}
        <li>{{ error }}</li>
      {% endfor %}
    </ul>
  </div>
{% endif %}

<form method="post" class="max-w-3xl mx-auto bg-white dark:bg-gray-800 p-6 rounded-lg shadow space-y-6">
  {% csrf_token %}

  <div>
    <label class="block font-semibold mb-1 text-gray-700 dark:text-gray-300">Texto de la Pregunta:</label>
    <textarea name="pregunta" required rows="3"
      class="w-full p-4 text-base rounded bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600">{{ pregunta.pregunta }}</textarea>
  </div>

  <div>
    <label class="block font-semibold mb-1 text-gray-700 dark:text-gray-300">Alternativa A:</label>
    <input type="text" name="alternativa_a" value="{{ pregunta.alternativa_a }}" required
      class="w-full p-4 text-base rounded bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600">
  </div>

  <div>
    <label class="block font-semibold mb-1 text-gray-700 dark:text-gray-300">Alternativa B:</label>
    <input type="text" name="alternativa_b" value="{{ pregunta.alternativa_b }}" required
      class="w-full p-4 text-base rounded bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600">
  </div>

  <div>
    <label class="block font-semibold mb-1 text-gray-700 dark:text-gray-300">Alternativa C:</label>
    <input type="text" name="alternativa_c" value="{{ pregunta.alternativa_c }}" required
      class="w-full p-4 text-base rounded bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600">
  </div>

  <div>
    <label class="block font-semibold mb-1 text-gray-700 dark:text-gray-300">Alternativa D:</label>
    <input type="text" name="alternativa_d" value="{{ pregunta.alternativa_d }}" required
      class="w-full p-4 text-base rounded bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600">
  </div>

  <div>
    <label class="block font-semibold mb-1 text-gray-700 dark:text-gray-300">Respuesta Correcta:</label>
    <select name="respuesta_correcta" required
      class="w-full p-4 text-base rounded bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600">
      {% for letra in "ABCD" %}
        <option value="{{ letra }}" {% if pregunta.respuesta_correcta == letra %}selected{% endif %}>{{ letra }}</option>
      {% endfor %}
    </select>
  </div>

  <div>
    <label class="block font-semibold mb-1 text-gray-700 dark:text-gray-300">Explicación:</label>
    <textarea name="explicacion" required rows="3"
      class="w-full p-4 text-base rounded bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600">{{ pregunta.explicacion }}</textarea>
  </div>

  <div>
    <label class="block font-semibold mb-1 text-gray-700 dark:text-gray-300">Tema:</label>
    <select name="tema" required
      class="w-full p-4 text-base rounded bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600">
      {% for tema in temas %}
        <option value="{{ tema.id }}" {% if pregunta.tema.id == tema.id %}selected{% endif %}>{{ tema.nombre }}</option>
      {% endfor %}
    </select>
  </div>

  <button type="submit"
    class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-4 rounded shadow text-lg">
    💾 Guardar Cambios
  </button>
</form>

<div class="text-center mt-6">
  <a href="{% url 'lista_preguntas' %}" class="text-blue-600 hover:underline dark:text-blue-400">
    ← Volver a la lista de preguntas
  </a>
</div>

{% endblock %}
